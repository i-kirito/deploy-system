import{o as nt,a as it,b as a,c as o,t as n,g as m,d as e,m as rt,n as V,F as B,l as N,h as r,v as d,p as dt,f as x,r as y,q as ut}from"./index-CHnSHA7V.js";import{a as v}from"./index-Dnk_-Q5K.js";import{_ as pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ct={class:"container"},mt={key:0,class:"toast"},vt={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"20px"}},yt={style:{display:"flex",gap:"12px"}},bt={class:"stats-grid"},ft={class:"stat-card"},gt={class:"stat-value"},wt={class:"stat-card"},xt={class:"stat-value"},kt={class:"stat-card"},_t={class:"stat-value"},Ct={class:"stat-card"},ht={class:"stat-value"},Pt={class:"stat-card"},Ut={class:"stat-value"},Vt={class:"admin-nav"},$t={key:1,class:"card"},Tt={style:{"overflow-x":"auto"}},At={class:"table"},St={style:{"font-family":"monospace"}},Mt={key:0,class:"status-badge status-used"},zt={key:1,class:"status-badge status-paid"},Et={key:0,class:"status-badge status-pending"},It={key:1,class:"status-badge status-expired"},Ot={style:{display:"flex",gap:"8px"}},Bt=["onClick"],Ft=["onClick"],Dt={key:0,style:{"text-align":"center",padding:"40px",color:"var(--text-muted)"}},Lt={key:2,class:"card"},Kt={style:{"margin-bottom":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},qt={style:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"}},Nt={class:"form-group",style:{"margin-bottom":"0"}},Rt={class:"form-group",style:{"margin-bottom":"0"}},Ht={class:"form-group",style:{"margin-bottom":"0"}},jt={class:"form-group",style:{"margin-bottom":"0"}},Gt={style:{"margin-bottom":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},Zt={class:"accounts-grid"},Jt={class:"account-header"},Qt={class:"account-id"},Wt={key:0,class:"status-badge status-assigned"},Xt={key:1,class:"status-badge status-available"},Yt=["onClick"],te={class:"account-details"},ee={class:"detail-row"},se=["onClick"],le={key:0,class:"detail-row"},ae=["onClick"],oe={key:1,class:"detail-row"},ne={class:"detail-value",style:{"font-family":"monospace","font-size":"0.75rem"}},ie={class:"detail-row"},re={class:"detail-value"},de={class:"account-actions"},ue=["onClick"],pe=["onClick","title"],ce=["onClick"],me={class:"modal"},ve={class:"modal-title"},ye={class:"form-group"},be={class:"form-group"},fe={class:"form-group"},ge={class:"form-group"},we={style:{display:"flex",gap:"12px","margin-top":"20px"}},xe=["disabled"],ke={key:1,style:{"text-align":"center",padding:"40px",color:"var(--text-muted)"}},_e={key:3,class:"card"},Ce={class:"form-group"},he={class:"form-group"},Pe={class:"form-group"},Ue={class:"form-group"},Ve={key:4,class:"card"},$e={class:"form-group"},Te={class:"form-group"},Ae={class:"form-group"},Se={class:"form-group"},Me=["disabled"],ze={key:0,class:"test-key-result",style:{"margin-top":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},Ee={style:{"margin-bottom":"12px"}},Ie={style:{"font-family":"monospace"}},Oe={style:{"margin-bottom":"16px"}},Be={style:{"font-family":"monospace","font-size":"1.2rem",color:"var(--primary)","font-weight":"600"}},Fe={key:5,class:"card"},De={class:"form-group"},Le={class:"form-group"},Ke={class:"form-group"},qe={class:"form-group"},Ne={__name:"Admin",setup(Re){const M=ut(),c=y("orders"),$=y(""),C=y({totalOrders:0,paidOrders:0,usedKeys:0,availableAccounts:0,totalRevenue:0}),z=y([]),E=y([]),g=y({alipay_qrcode:"",price_builtin:"60",price_custom:"50",download_url:""}),i=y(null),f=y({email:"",password:"",recoveryEmail:"",totpSecret:""}),P=y(""),p=y({oldPassword:"",newPassword:"",confirmPassword:"",newUsername:""}),b=y({email:"",password:"",recoveryEmail:"",totpSecret:""}),T=y(!1),k=y(null),F=y(Date.now());let A=null;v.interceptors.request.use(l=>{const t=localStorage.getItem("adminToken");return t&&(l.headers.Authorization=`Bearer ${t}`),l}),nt(async()=>{await Promise.all([w(),I(),_(),H()]),A=setInterval(()=>{F.value=Date.now()},1e3)}),it(()=>{A&&(clearInterval(A),A=null)});function D(l){const s=new Date(l+"Z").getTime()+10*60*1e3,u=Math.floor((s-F.value)/1e3);return Math.max(0,u)}function R(l){const t=Math.floor(l/60),s=l%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}async function w(){try{const{data:l}=await v.get("/api/admin/stats");C.value=l}catch(l){console.error("加载统计失败",l)}}async function I(){try{const{data:l}=await v.get("/api/admin/orders");z.value=l}catch(l){console.error("加载订单失败",l)}}async function _(){try{const{data:l}=await v.get("/api/admin/accounts");E.value=l}catch(l){console.error("加载账号失败",l)}}async function H(){try{const{data:l}=await v.get("/api/admin/config");g.value={...g.value,...l}}catch(l){console.error("加载配置失败",l)}}async function j(l){var t,s;if(confirm("确认该订单已收款？"))try{const{data:u}=await v.post("/api/admin/order/confirm",{orderId:l});alert(`订单已确认，密钥: ${u.keyCode}`),await Promise.all([w(),I()])}catch(u){alert(((s=(t=u.response)==null?void 0:t.data)==null?void 0:s.error)||"确认失败")}}async function G(l){var t,s;if(confirm("确认删除该订单？如果绑定了内置账号且未使用，账号将被释放。"))try{await v.delete(`/api/admin/orders/${l}`),await Promise.all([w(),I(),_()]),alert("订单已删除")}catch(u){alert(((s=(t=u.response)==null?void 0:t.data)==null?void 0:s.error)||"删除失败")}}async function Z(){var l,t;if(!f.value.email||!f.value.password){alert("请填写邮箱和密码");return}try{await v.post("/api/admin/accounts",f.value),f.value={email:"",password:"",recoveryEmail:"",totpSecret:""},await Promise.all([w(),_()]),alert("添加成功")}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"添加失败")}}async function J(){var s,u,K,q;if(!P.value.trim()){alert("请输入账号信息");return}const l=P.value.trim().split(`
`),t=[];for(const h of l){const U=h.split("|");U.length>=2&&t.push({email:U[0].trim(),password:U[1].trim(),recoveryEmail:((s=U[2])==null?void 0:s.trim())||"",totpSecret:((u=U[3])==null?void 0:u.trim())||""})}if(t.length===0){alert("未识别到有效账号");return}try{const{data:h}=await v.post("/api/admin/accounts/batch",{accounts:t});P.value="",await Promise.all([w(),_()]),alert(`添加完成！成功: ${h.successCount}, 失败: ${h.failCount}`)}catch(h){alert(((q=(K=h.response)==null?void 0:K.data)==null?void 0:q.error)||"批量添加失败")}}async function Q(l){if(confirm("确认删除该账号？"))try{await v.delete(`/api/admin/accounts/${l}`),await Promise.all([w(),_()])}catch{alert("删除失败")}}async function W(l){if(confirm("确认释放该账号？将重置为可用状态。"))try{await v.post(`/api/admin/accounts/${l}/release`),await Promise.all([w(),_()]),S("账号已释放")}catch{alert("释放失败")}}function X(l){i.value={...l}}async function Y(){var l,t;if(i.value)try{const s={email:i.value.email,password:i.value.password,recoveryEmail:i.value.recovery_email||"",totpSecret:i.value.totp_secret||""};await v.put(`/api/admin/accounts/${i.value.id}`,s),i.value=null,await _(),S("账号已更新")}catch(s){console.error("保存账号失败:",s),alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"保存失败: "+(s.message||"未知错误"))}}async function tt(){try{await v.post("/api/admin/config",g.value),alert("配置已保存")}catch{alert("保存失败")}}function L(l){return l?new Date(l).toLocaleString("zh-CN"):"-"}function et(l){return l?l.length<=4?"****":l.substring(0,2)+"****"+l.substring(l.length-2):"-"}async function O(l){if(l)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(l);else{const t=document.createElement("textarea");t.value=l,t.style.position="fixed",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}S("已复制到剪贴板")}catch(t){console.error("复制失败:",t),S("复制失败，请手动复制")}}function S(l){$.value=l,setTimeout(()=>{$.value=""},1500)}function st(){localStorage.removeItem("adminToken"),M.push("/admin/login")}async function lt(){var l,t;if(!p.value.oldPassword||!p.value.newPassword){alert("请填写旧密码和新密码");return}if(p.value.newPassword!==p.value.confirmPassword){alert("两次输入的新密码不一致");return}if(p.value.newPassword.length<6){alert("新密码长度至少6位");return}try{await v.post("/api/admin/password",{oldPassword:p.value.oldPassword,newPassword:p.value.newPassword,newUsername:p.value.newUsername||void 0}),alert("密码修改成功，请重新登录"),localStorage.removeItem("adminToken"),M.push("/admin/login")}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"修改失败")}}async function at(){var l,t;if(!b.value.email||!b.value.password){alert("请填写测试账号邮箱和密码");return}T.value=!0,k.value=null;try{const{data:s}=await v.post("/api/admin/test-key",b.value);k.value={keyCode:s.keyCode,orderId:s.orderId},await w()}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"生成测试密钥失败")}finally{T.value=!1}}function ot(){k.value&&(navigator.clipboard.writeText(k.value.keyCode),alert("密钥已复制到剪贴板"))}return(l,t)=>(a(),o("div",ct,[$.value?(a(),o("div",mt,n($.value),1)):m("",!0),e("div",vt,[t[29]||(t[29]=e("h1",null,"管理后台",-1)),e("div",yt,[e("button",{class:"btn",style:{background:"var(--bg-input)"},onClick:t[0]||(t[0]=s=>rt(M).push("/"))},"返回首页"),e("button",{class:"btn btn-danger",onClick:st},"退出登录")])]),e("div",bt,[e("div",ft,[e("div",gt,n(C.value.totalOrders),1),t[30]||(t[30]=e("div",{class:"stat-label"},"总订单数",-1))]),e("div",wt,[e("div",xt,n(C.value.paidOrders),1),t[31]||(t[31]=e("div",{class:"stat-label"},"已支付订单",-1))]),e("div",kt,[e("div",_t,n(C.value.usedKeys),1),t[32]||(t[32]=e("div",{class:"stat-label"},"已使用密钥",-1))]),e("div",Ct,[e("div",ht,n(C.value.availableAccounts),1),t[33]||(t[33]=e("div",{class:"stat-label"},"可用账号",-1))]),e("div",Pt,[e("div",Ut,"¥"+n(C.value.totalRevenue),1),t[34]||(t[34]=e("div",{class:"stat-label"},"总收入",-1))])]),e("div",Vt,[e("button",{class:V({active:c.value==="orders"}),onClick:t[1]||(t[1]=s=>c.value="orders")}," 订单管理 ",2),e("button",{class:V({active:c.value==="accounts"}),onClick:t[2]||(t[2]=s=>c.value="accounts")}," 账号池管理 ",2),e("button",{class:V({active:c.value==="config"}),onClick:t[3]||(t[3]=s=>c.value="config")}," 系统配置 ",2),e("button",{class:V({active:c.value==="test"}),onClick:t[4]||(t[4]=s=>c.value="test")}," 测试密钥 ",2),e("button",{class:V({active:c.value==="password"}),onClick:t[5]||(t[5]=s=>c.value="password")}," 修改密码 ",2)]),c.value==="orders"?(a(),o("div",$t,[t[36]||(t[36]=e("h2",{class:"card-title"},"订单列表",-1)),e("div",Tt,[e("table",At,[t[35]||(t[35]=e("thead",null,[e("tr",null,[e("th",null,"订单号"),e("th",null,"类型"),e("th",null,"金额"),e("th",null,"邮箱"),e("th",null,"密钥"),e("th",null,"状态"),e("th",null,"创建时间"),e("th",null,"操作")])],-1)),e("tbody",null,[(a(!0),o(B,null,N(z.value,s=>(a(),o("tr",{key:s.order_id},[e("td",null,n(s.order_id),1),e("td",null,n(s.key_type==="builtin"?"内置账号":"自有账号"),1),e("td",null,"¥"+n(s.amount),1),e("td",null,n(s.contact_email||"-"),1),e("td",St,n(s.key_code||"-"),1),e("td",null,[s.is_used?(a(),o("span",Mt,"已使用")):s.status==="paid"?(a(),o("span",zt,"已支付")):(a(),o(B,{key:2},[D(s.created_at)>0?(a(),o("span",Et," 待支付 "+n(R(D(s.created_at))),1)):(a(),o("span",It,"已过期"))],64))]),e("td",null,n(L(s.created_at)),1),e("td",null,[e("div",Ot,[s.status==="pending"?(a(),o("button",{key:0,class:"btn btn-success",style:{padding:"6px 12px","font-size":"0.85rem"},onClick:u=>j(s.order_id)}," 确认支付 ",8,Bt)):m("",!0),e("button",{class:"btn btn-danger",style:{padding:"6px 12px","font-size":"0.85rem"},onClick:u=>G(s.order_id)}," 删除 ",8,Ft)])])]))),128))])])]),z.value.length===0?(a(),o("div",Dt," 暂无订单 ")):m("",!0)])):m("",!0),c.value==="accounts"?(a(),o("div",Lt,[t[57]||(t[57]=e("h2",{class:"card-title"},"内置账号池 (Gemini CLI / 反重力认证)",-1)),e("div",Kt,[t[41]||(t[41]=e("h3",{style:{"margin-bottom":"12px","font-size":"1rem"}},"添加新账号",-1)),e("div",qt,[e("div",Nt,[t[37]||(t[37]=e("label",{class:"form-label"},"谷歌邮箱",-1)),r(e("input",{type:"email",class:"input","onUpdate:modelValue":t[6]||(t[6]=s=>f.value.email=s),placeholder:"example@gmail.com"},null,512),[[d,f.value.email]])]),e("div",Rt,[t[38]||(t[38]=e("label",{class:"form-label"},"密码",-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[7]||(t[7]=s=>f.value.password=s),placeholder:"谷歌密码"},null,512),[[d,f.value.password]])]),e("div",Ht,[t[39]||(t[39]=e("label",{class:"form-label"},"辅助邮箱",-1)),r(e("input",{type:"email",class:"input","onUpdate:modelValue":t[8]||(t[8]=s=>f.value.recoveryEmail=s),placeholder:"recovery@example.com"},null,512),[[d,f.value.recoveryEmail]])]),e("div",jt,[t[40]||(t[40]=e("label",{class:"form-label"},"2FA密钥/应用密码",-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[9]||(t[9]=s=>f.value.totpSecret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[d,f.value.totpSecret]])])]),e("button",{class:"btn btn-primary",style:{"margin-top":"12px"},onClick:Z},"添加账号")]),e("div",Gt,[t[42]||(t[42]=e("h3",{style:{"margin-bottom":"12px","font-size":"1rem"}},"批量添加 (格式: 邮箱|密码|辅助邮箱|2FA密钥，每行一个)",-1)),r(e("textarea",{class:"textarea","onUpdate:modelValue":t[10]||(t[10]=s=>P.value=s),placeholder:`example1@gmail.com|password1|recovery1@example.com|totp_secret1
example2@gmail.com|password2|recovery2@example.com|totp_secret2`,style:{"min-height":"120px"}},null,512),[[d,P.value]]),e("button",{class:"btn btn-primary",style:{"margin-top":"12px"},onClick:J},"批量添加")]),e("div",Zt,[(a(!0),o(B,null,N(E.value,s=>(a(),o("div",{key:s.id,class:"account-card"},[e("div",Jt,[e("div",Qt,"#"+n(s.id),1),s.assigned_order_id?(a(),o("span",Wt,[...t[43]||(t[43]=[e("span",{class:"status-dot"},null,-1),x("已分配 ",-1)])])):(a(),o("span",Xt,[...t[44]||(t[44]=[e("span",{class:"status-dot"},null,-1),x("可用 ",-1)])]))]),e("div",{class:"account-email copyable",onClick:u=>O(s.email),title:"点击复制"},[t[45]||(t[45]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})],-1)),x(" "+n(s.email),1)],8,Yt),e("div",te,[e("div",ee,[t[46]||(t[46]=e("span",{class:"detail-label"},"密码",-1)),e("span",{class:"detail-value copyable",onClick:u=>O(s.password),title:"点击复制"},n(et(s.password)),9,se)]),s.recovery_email?(a(),o("div",le,[t[47]||(t[47]=e("span",{class:"detail-label"},"辅助邮箱",-1)),e("span",{class:"detail-value copyable",onClick:u=>O(s.recovery_email),title:"点击复制"},n(s.recovery_email),9,ae)])):m("",!0),s.totp_secret?(a(),o("div",oe,[t[48]||(t[48]=e("span",{class:"detail-label"},"2FA",-1)),e("span",ne,n(s.totp_secret.substring(0,16))+n(s.totp_secret.length>16?"...":""),1)])):m("",!0),e("div",ie,[t[49]||(t[49]=e("span",{class:"detail-label"},"添加时间",-1)),e("span",re,n(L(s.created_at)),1)])]),e("div",de,[e("button",{class:"btn-action btn-edit",onClick:u=>X(s)},[...t[50]||(t[50]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),x(" 编辑 ",-1)])],8,ue),s.assigned_order_id?(a(),o("button",{key:0,class:"btn-action btn-release",onClick:u=>W(s.id),title:"关联订单: "+s.assigned_order_id},[...t[51]||(t[51]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),x(" 释放 ",-1)])],8,pe)):m("",!0),s.assigned_order_id?m("",!0):(a(),o("button",{key:1,class:"btn-action btn-delete",onClick:u=>Q(s.id)},[...t[52]||(t[52]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),x(" 删除 ",-1)])],8,ce))])]))),128))]),i.value?(a(),o("div",{key:0,class:"modal-overlay",onClick:t[16]||(t[16]=dt(s=>i.value=null,["self"]))},[e("div",me,[e("h3",ve,"编辑账号 #"+n(i.value.id),1),e("div",ye,[t[53]||(t[53]=e("label",{class:"form-label"},"谷歌邮箱",-1)),r(e("input",{type:"email",class:"input","onUpdate:modelValue":t[11]||(t[11]=s=>i.value.email=s),placeholder:"example@gmail.com"},null,512),[[d,i.value.email]])]),e("div",be,[t[54]||(t[54]=e("label",{class:"form-label"},"密码",-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[12]||(t[12]=s=>i.value.password=s),placeholder:"谷歌密码"},null,512),[[d,i.value.password]])]),e("div",fe,[t[55]||(t[55]=e("label",{class:"form-label"},"辅助邮箱",-1)),r(e("input",{type:"email",class:"input","onUpdate:modelValue":t[13]||(t[13]=s=>i.value.recovery_email=s),placeholder:"recovery@example.com"},null,512),[[d,i.value.recovery_email]])]),e("div",ge,[t[56]||(t[56]=e("label",{class:"form-label"},"2FA密钥/应用密码",-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[14]||(t[14]=s=>i.value.totp_secret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[d,i.value.totp_secret]])]),e("div",we,[e("button",{class:"btn",style:{flex:"1",background:"var(--bg-input)"},onClick:t[15]||(t[15]=s=>i.value=null)}," 取消 "),e("button",{class:"btn btn-primary",style:{flex:"1"},onClick:Y,disabled:!i.value.email||!i.value.password}," 保存 ",8,xe)])])])):m("",!0),E.value.length===0?(a(),o("div",ke," 暂无账号，请先添加 ")):m("",!0)])):m("",!0),c.value==="config"?(a(),o("div",_e,[t[62]||(t[62]=e("h2",{class:"card-title"},"系统配置",-1)),e("div",Ce,[t[58]||(t[58]=e("label",{class:"form-label"},"支付宝收款码图片URL",-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[17]||(t[17]=s=>g.value.alipay_qrcode=s),placeholder:"https://example.com/qrcode.png"},null,512),[[d,g.value.alipay_qrcode]])]),e("div",he,[t[59]||(t[59]=e("label",{class:"form-label"},"内置账号价格 (元)",-1)),r(e("input",{type:"number",class:"input","onUpdate:modelValue":t[18]||(t[18]=s=>g.value.price_builtin=s)},null,512),[[d,g.value.price_builtin]])]),e("div",Pe,[t[60]||(t[60]=e("label",{class:"form-label"},"自有账号价格 (元)",-1)),r(e("input",{type:"number",class:"input","onUpdate:modelValue":t[19]||(t[19]=s=>g.value.price_custom=s)},null,512),[[d,g.value.price_custom]])]),e("div",Ue,[t[61]||(t[61]=e("label",{class:"form-label"},"部署脚本下载地址",-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[20]||(t[20]=s=>g.value.download_url=s),placeholder:"https://example.com/deploy-script.zip"},null,512),[[d,g.value.download_url]])]),e("button",{class:"btn btn-primary",onClick:tt},"保存配置")])):m("",!0),c.value==="test"?(a(),o("div",Ve,[t[70]||(t[70]=e("h2",{class:"card-title"},"生成测试密钥",-1)),t[71]||(t[71]=e("p",{style:{color:"var(--text-muted)","margin-bottom":"20px"}}," 无需支付，使用自定义测试账号直接生成可用密钥。测试账号信息不会存入账号池。 ",-1)),e("div",$e,[t[63]||(t[63]=e("label",{class:"form-label"},[x("测试账号邮箱 "),e("span",{style:{color:"var(--danger)"}},"*")],-1)),r(e("input",{type:"email",class:"input","onUpdate:modelValue":t[21]||(t[21]=s=>b.value.email=s),placeholder:"test@gmail.com"},null,512),[[d,b.value.email]])]),e("div",Te,[t[64]||(t[64]=e("label",{class:"form-label"},[x("测试账号密码 "),e("span",{style:{color:"var(--danger)"}},"*")],-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[22]||(t[22]=s=>b.value.password=s),placeholder:"测试账号密码"},null,512),[[d,b.value.password]])]),e("div",Ae,[t[65]||(t[65]=e("label",{class:"form-label"},"辅助邮箱 (可选)",-1)),r(e("input",{type:"email",class:"input","onUpdate:modelValue":t[23]||(t[23]=s=>b.value.recoveryEmail=s),placeholder:"recovery@example.com"},null,512),[[d,b.value.recoveryEmail]])]),e("div",Se,[t[66]||(t[66]=e("label",{class:"form-label"},"2FA密钥/应用密码 (可选)",-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[24]||(t[24]=s=>b.value.totpSecret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[d,b.value.totpSecret]])]),e("button",{class:"btn btn-success",onClick:at,disabled:T.value||!b.value.email||!b.value.password},n(T.value?"生成中...":"生成测试密钥"),9,Me),k.value?(a(),o("div",ze,[t[69]||(t[69]=e("h3",{style:{color:"var(--success)","margin-bottom":"12px"}},"测试密钥生成成功",-1)),e("div",Ee,[t[67]||(t[67]=e("span",{style:{color:"var(--text-muted)"}},"订单号：",-1)),e("span",Ie,n(k.value.orderId),1)]),e("div",Oe,[t[68]||(t[68]=e("span",{style:{color:"var(--text-muted)"}},"密钥：",-1)),e("span",Be,n(k.value.keyCode),1)]),e("button",{class:"btn btn-primary",onClick:ot},"复制密钥")])):m("",!0)])):m("",!0),c.value==="password"?(a(),o("div",Fe,[t[76]||(t[76]=e("h2",{class:"card-title"},"修改管理员账号密码",-1)),e("div",De,[t[72]||(t[72]=e("label",{class:"form-label"},"新用户名 (可选，不填则保持不变)",-1)),r(e("input",{type:"text",class:"input","onUpdate:modelValue":t[25]||(t[25]=s=>p.value.newUsername=s),placeholder:"admin"},null,512),[[d,p.value.newUsername]])]),e("div",Le,[t[73]||(t[73]=e("label",{class:"form-label"},"旧密码",-1)),r(e("input",{type:"password",class:"input","onUpdate:modelValue":t[26]||(t[26]=s=>p.value.oldPassword=s),placeholder:"请输入当前密码"},null,512),[[d,p.value.oldPassword]])]),e("div",Ke,[t[74]||(t[74]=e("label",{class:"form-label"},"新密码",-1)),r(e("input",{type:"password",class:"input","onUpdate:modelValue":t[27]||(t[27]=s=>p.value.newPassword=s),placeholder:"请输入新密码"},null,512),[[d,p.value.newPassword]])]),e("div",qe,[t[75]||(t[75]=e("label",{class:"form-label"},"确认新密码",-1)),r(e("input",{type:"password",class:"input","onUpdate:modelValue":t[28]||(t[28]=s=>p.value.confirmPassword=s),placeholder:"请再次输入新密码"},null,512),[[d,p.value.confirmPassword]])]),e("button",{class:"btn btn-primary",onClick:lt},"修改密码")])):m("",!0)]))}},Ze=pt(Ne,[["__scopeId","data-v-ba0870d9"]]);export{Ze as default};
