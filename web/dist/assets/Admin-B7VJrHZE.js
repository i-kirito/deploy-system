import{o as rt,a as dt,b as a,c as o,t as i,g as v,d as e,m as ut,n as V,F as B,l as R,h as d,v as u,p as pt,f as k,r as y,q as ct}from"./index-CDz4DW_X.js";import{a as c}from"./index-Dnk_-Q5K.js";import{_ as mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const vt={class:"container"},yt={key:0,class:"toast"},bt={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"20px"}},ft={style:{display:"flex",gap:"12px"}},gt={class:"stats-grid"},wt={class:"stat-card"},kt={class:"stat-value"},xt={class:"stat-card"},_t={class:"stat-value"},Ct={class:"stat-card"},ht={class:"stat-value"},Pt={class:"stat-card"},$t={class:"stat-value"},Ut={class:"stat-card"},Vt={class:"stat-value"},At={class:"admin-nav"},Tt={key:1,class:"card"},St={style:{"overflow-x":"auto"}},Mt={class:"table"},Et={style:{"font-family":"monospace"}},zt={key:0,class:"status-badge status-used"},It={key:1,class:"status-badge status-paid"},Ot={key:0,class:"status-badge status-pending"},Bt={key:1,class:"status-badge status-expired"},Dt={style:{display:"flex",gap:"8px"}},Ft=["onClick"],Lt=["onClick"],Kt={key:0,style:{"text-align":"center",padding:"40px",color:"var(--text-muted)"}},qt={key:2,class:"card"},Nt={style:{"margin-bottom":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},Rt={style:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"}},Ht={class:"form-group",style:{"margin-bottom":"0"}},jt={class:"form-group",style:{"margin-bottom":"0"}},Gt={class:"form-group",style:{"margin-bottom":"0"}},Zt={class:"form-group",style:{"margin-bottom":"0"}},Jt={style:{"margin-bottom":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},Qt={class:"accounts-grid"},Wt={class:"account-header"},Xt={class:"account-id"},Yt=["onClick"],te={key:1,class:"status-badge status-assigned"},ee=["onClick"],se=["onClick"],le={class:"account-details"},ae={class:"detail-row"},oe=["onClick"],ne={key:0,class:"detail-row"},ie=["onClick"],re={key:1,class:"detail-row"},de={class:"detail-value",style:{"font-family":"monospace","font-size":"0.75rem"}},ue={class:"detail-row"},pe={class:"detail-value"},ce={class:"account-actions"},me=["onClick"],ve=["onClick","title"],ye=["onClick"],be={class:"modal"},fe={class:"modal-title"},ge={class:"form-group"},we={class:"form-group"},ke={class:"form-group"},xe={class:"form-group"},_e={style:{display:"flex",gap:"12px","margin-top":"20px"}},Ce=["disabled"],he={key:1,style:{"text-align":"center",padding:"40px",color:"var(--text-muted)"}},Pe={key:3,class:"card"},$e={class:"form-group"},Ue={class:"form-group"},Ve={class:"form-group"},Ae={class:"form-group"},Te={key:4,class:"card"},Se={class:"form-group"},Me={class:"form-group"},Ee={class:"form-group"},ze={class:"form-group"},Ie=["disabled"],Oe={key:0,class:"test-key-result",style:{"margin-top":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},Be={style:{"margin-bottom":"12px"}},De={style:{"font-family":"monospace"}},Fe={style:{"margin-bottom":"16px"}},Le={style:{"font-family":"monospace","font-size":"1.2rem",color:"var(--primary)","font-weight":"600"}},Ke={key:5,class:"card"},qe={class:"form-group"},Ne={class:"form-group"},Re={class:"form-group"},He={class:"form-group"},je={__name:"Admin",setup(Ge){const M=ct(),m=y("orders"),A=y(""),h=y({totalOrders:0,paidOrders:0,usedKeys:0,availableAccounts:0,totalRevenue:0}),E=y([]),z=y([]),g=y({alipay_qrcode:"",price_builtin:"60",price_custom:"50",download_url:""}),r=y(null),f=y({email:"",password:"",recoveryEmail:"",totpSecret:""}),P=y(""),p=y({oldPassword:"",newPassword:"",confirmPassword:"",newUsername:""}),b=y({email:"",password:"",recoveryEmail:"",totpSecret:""}),T=y(!1),_=y(null),D=y(Date.now());let S=null;c.interceptors.request.use(l=>{const t=localStorage.getItem("adminToken");return t&&(l.headers.Authorization=`Bearer ${t}`),l}),rt(async()=>{await Promise.all([w(),I(),x(),j()]),S=setInterval(()=>{D.value=Date.now()},1e3)}),dt(()=>{S&&(clearInterval(S),S=null)});function F(l){const s=new Date(l+"Z").getTime()+10*60*1e3,n=Math.floor((s-D.value)/1e3);return Math.max(0,n)}function H(l){const t=Math.floor(l/60),s=l%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}async function w(){try{const{data:l}=await c.get("/api/admin/stats");h.value=l}catch(l){console.error("加载统计失败",l)}}async function I(){try{const{data:l}=await c.get("/api/admin/orders");E.value=l}catch(l){console.error("加载订单失败",l)}}async function x(){try{const{data:l}=await c.get("/api/admin/accounts");z.value=l}catch(l){console.error("加载账号失败",l)}}async function j(){try{const{data:l}=await c.get("/api/admin/config");g.value={...g.value,...l}}catch(l){console.error("加载配置失败",l)}}async function G(l){var t,s;if(confirm("确认该订单已收款？"))try{const{data:n}=await c.post("/api/admin/order/confirm",{orderId:l});alert(`订单已确认，密钥: ${n.keyCode}`),await Promise.all([w(),I()])}catch(n){alert(((s=(t=n.response)==null?void 0:t.data)==null?void 0:s.error)||"确认失败")}}async function Z(l){var t,s;if(confirm("确认删除该订单？如果绑定了内置账号且未使用，账号将被释放。"))try{await c.delete(`/api/admin/orders/${l}`),await Promise.all([w(),I(),x()]),alert("订单已删除")}catch(n){alert(((s=(t=n.response)==null?void 0:t.data)==null?void 0:s.error)||"删除失败")}}async function J(){var l,t;if(!f.value.email||!f.value.password){alert("请填写邮箱和密码");return}try{await c.post("/api/admin/accounts",f.value),f.value={email:"",password:"",recoveryEmail:"",totpSecret:""},await Promise.all([w(),x()]),alert("添加成功")}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"添加失败")}}async function Q(){var s,n,q,N;if(!P.value.trim()){alert("请输入账号信息");return}const l=P.value.trim().split(`
`),t=[];for(const C of l){const it=C.includes("---")?"---":"|",U=C.split(it);U.length>=2&&t.push({email:U[0].trim(),password:U[1].trim(),recoveryEmail:((s=U[2])==null?void 0:s.trim())||"",totpSecret:((n=U[3])==null?void 0:n.trim())||""})}if(t.length===0){alert("未识别到有效账号");return}try{const{data:C}=await c.post("/api/admin/accounts/batch",{accounts:t});P.value="",await Promise.all([w(),x()]),alert(`添加完成！成功: ${C.successCount}, 失败: ${C.failCount}`)}catch(C){alert(((N=(q=C.response)==null?void 0:q.data)==null?void 0:N.error)||"批量添加失败")}}async function W(l){if(confirm("确认删除该账号？"))try{await c.delete(`/api/admin/accounts/${l}`),await Promise.all([w(),x()])}catch{alert("删除失败")}}async function X(l){if(confirm("确认释放该账号？将重置为可用状态。"))try{await c.post(`/api/admin/accounts/${l}/release`),await Promise.all([w(),x()]),$("账号已释放")}catch{alert("释放失败")}}async function L(l){var t,s;try{const{data:n}=await c.post(`/api/admin/accounts/${l}/toggle-status`);await Promise.all([w(),x()]),$(n.message)}catch(n){alert(((s=(t=n.response)==null?void 0:t.data)==null?void 0:s.error)||"切换状态失败")}}function Y(l){r.value={...l}}async function tt(){var l,t;if(r.value)try{const s={email:r.value.email,password:r.value.password,recoveryEmail:r.value.recovery_email||"",totpSecret:r.value.totp_secret||""};await c.put(`/api/admin/accounts/${r.value.id}`,s),r.value=null,await x(),$("账号已更新")}catch(s){console.error("保存账号失败:",s),alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"保存失败: "+(s.message||"未知错误"))}}async function et(){try{await c.post("/api/admin/config",g.value),alert("配置已保存")}catch{alert("保存失败")}}function K(l){return l?new Date(l).toLocaleString("zh-CN"):"-"}function st(l){return l?l.length<=4?"****":l.substring(0,2)+"****"+l.substring(l.length-2):"-"}async function O(l){if(l)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(l);else{const t=document.createElement("textarea");t.value=l,t.style.position="fixed",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}$("已复制到剪贴板")}catch(t){console.error("复制失败:",t),$("复制失败，请手动复制")}}function $(l){A.value=l,setTimeout(()=>{A.value=""},1500)}function lt(){localStorage.removeItem("adminToken"),M.push("/admin/login")}async function at(){var l,t;if(!p.value.oldPassword||!p.value.newPassword){alert("请填写旧密码和新密码");return}if(p.value.newPassword!==p.value.confirmPassword){alert("两次输入的新密码不一致");return}if(p.value.newPassword.length<6){alert("新密码长度至少6位");return}try{await c.post("/api/admin/password",{oldPassword:p.value.oldPassword,newPassword:p.value.newPassword,newUsername:p.value.newUsername||void 0}),alert("密码修改成功，请重新登录"),localStorage.removeItem("adminToken"),M.push("/admin/login")}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"修改失败")}}async function ot(){var l,t;if(!b.value.email||!b.value.password){alert("请填写测试账号邮箱和密码");return}T.value=!0,_.value=null;try{const{data:s}=await c.post("/api/admin/test-key",b.value);_.value={keyCode:s.keyCode,orderId:s.orderId},await w()}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"生成测试密钥失败")}finally{T.value=!1}}function nt(){_.value&&(navigator.clipboard.writeText(_.value.keyCode),alert("密钥已复制到剪贴板"))}return(l,t)=>(a(),o("div",vt,[A.value?(a(),o("div",yt,i(A.value),1)):v("",!0),e("div",bt,[t[29]||(t[29]=e("h1",null,"管理后台",-1)),e("div",ft,[e("button",{class:"btn",style:{background:"var(--bg-input)"},onClick:t[0]||(t[0]=s=>ut(M).push("/"))},"返回首页"),e("button",{class:"btn btn-danger",onClick:lt},"退出登录")])]),e("div",gt,[e("div",wt,[e("div",kt,i(h.value.totalOrders),1),t[30]||(t[30]=e("div",{class:"stat-label"},"总订单数",-1))]),e("div",xt,[e("div",_t,i(h.value.paidOrders),1),t[31]||(t[31]=e("div",{class:"stat-label"},"已支付订单",-1))]),e("div",Ct,[e("div",ht,i(h.value.usedKeys),1),t[32]||(t[32]=e("div",{class:"stat-label"},"已使用密钥",-1))]),e("div",Pt,[e("div",$t,i(h.value.availableAccounts),1),t[33]||(t[33]=e("div",{class:"stat-label"},"可用账号",-1))]),e("div",Ut,[e("div",Vt,"¥"+i(h.value.totalRevenue),1),t[34]||(t[34]=e("div",{class:"stat-label"},"总收入",-1))])]),e("div",At,[e("button",{class:V({active:m.value==="orders"}),onClick:t[1]||(t[1]=s=>m.value="orders")}," 订单管理 ",2),e("button",{class:V({active:m.value==="accounts"}),onClick:t[2]||(t[2]=s=>m.value="accounts")}," 账号池管理 ",2),e("button",{class:V({active:m.value==="config"}),onClick:t[3]||(t[3]=s=>m.value="config")}," 系统配置 ",2),e("button",{class:V({active:m.value==="test"}),onClick:t[4]||(t[4]=s=>m.value="test")}," 测试密钥 ",2),e("button",{class:V({active:m.value==="password"}),onClick:t[5]||(t[5]=s=>m.value="password")}," 修改密码 ",2)]),m.value==="orders"?(a(),o("div",Tt,[t[36]||(t[36]=e("h2",{class:"card-title"},"订单列表",-1)),e("div",St,[e("table",Mt,[t[35]||(t[35]=e("thead",null,[e("tr",null,[e("th",null,"订单号"),e("th",null,"类型"),e("th",null,"金额"),e("th",null,"邮箱"),e("th",null,"密钥"),e("th",null,"状态"),e("th",null,"创建时间"),e("th",null,"操作")])],-1)),e("tbody",null,[(a(!0),o(B,null,R(E.value,s=>(a(),o("tr",{key:s.order_id},[e("td",null,i(s.order_id),1),e("td",null,i(s.key_type==="builtin"?"内置账号":"自有账号"),1),e("td",null,"¥"+i(s.amount),1),e("td",null,i(s.contact_email||"-"),1),e("td",Et,i(s.key_code||"-"),1),e("td",null,[s.is_used?(a(),o("span",zt,"已使用")):s.status==="paid"?(a(),o("span",It,"已支付")):(a(),o(B,{key:2},[F(s.created_at)>0?(a(),o("span",Ot," 待支付 "+i(H(F(s.created_at))),1)):(a(),o("span",Bt,"已过期"))],64))]),e("td",null,i(K(s.created_at)),1),e("td",null,[e("div",Dt,[s.status==="pending"?(a(),o("button",{key:0,class:"btn btn-success",style:{padding:"6px 12px","font-size":"0.85rem"},onClick:n=>G(s.order_id)}," 确认支付 ",8,Ft)):v("",!0),e("button",{class:"btn btn-danger",style:{padding:"6px 12px","font-size":"0.85rem"},onClick:n=>Z(s.order_id)}," 删除 ",8,Lt)])])]))),128))])])]),E.value.length===0?(a(),o("div",Kt," 暂无订单 ")):v("",!0)])):v("",!0),m.value==="accounts"?(a(),o("div",qt,[t[58]||(t[58]=e("h2",{class:"card-title"},"内置账号池 (Gemini CLI / 反重力认证)",-1)),e("div",Nt,[t[41]||(t[41]=e("h3",{style:{"margin-bottom":"12px","font-size":"1rem"}},"添加新账号",-1)),e("div",Rt,[e("div",Ht,[t[37]||(t[37]=e("label",{class:"form-label"},"谷歌邮箱",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[6]||(t[6]=s=>f.value.email=s),placeholder:"example@gmail.com"},null,512),[[u,f.value.email]])]),e("div",jt,[t[38]||(t[38]=e("label",{class:"form-label"},"密码",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[7]||(t[7]=s=>f.value.password=s),placeholder:"谷歌密码"},null,512),[[u,f.value.password]])]),e("div",Gt,[t[39]||(t[39]=e("label",{class:"form-label"},"辅助邮箱",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[8]||(t[8]=s=>f.value.recoveryEmail=s),placeholder:"recovery@example.com"},null,512),[[u,f.value.recoveryEmail]])]),e("div",Zt,[t[40]||(t[40]=e("label",{class:"form-label"},"2FA密钥/应用密码",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[9]||(t[9]=s=>f.value.totpSecret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[u,f.value.totpSecret]])])]),e("button",{class:"btn btn-primary",style:{"margin-top":"12px"},onClick:J},"添加账号")]),e("div",Jt,[t[42]||(t[42]=e("h3",{style:{"margin-bottom":"12px","font-size":"1rem"}},"批量添加 (格式: 邮箱|密码|辅助邮箱|2FA密钥，每行一个)",-1)),d(e("textarea",{class:"textarea","onUpdate:modelValue":t[10]||(t[10]=s=>P.value=s),placeholder:`example1@gmail.com|password1|recovery1@example.com|totp_secret1
example2@gmail.com|password2|recovery2@example.com|totp_secret2`,style:{"min-height":"120px"}},null,512),[[u,P.value]]),e("button",{class:"btn btn-primary",style:{"margin-top":"12px"},onClick:Q},"批量添加")]),e("div",Qt,[(a(!0),o(B,null,R(z.value,s=>(a(),o("div",{key:s.id,class:"account-card"},[e("div",Wt,[e("div",Xt,"#"+i(s.id),1),s.assigned_order_id==="DISABLED"?(a(),o("span",{key:0,class:"status-badge status-disabled",onClick:n=>L(s.id),style:{cursor:"pointer"},title:"点击切换为可用"},[...t[43]||(t[43]=[e("span",{class:"status-dot"},null,-1),k("已禁用 ",-1)])],8,Yt)):s.assigned_order_id?(a(),o("span",te,[...t[44]||(t[44]=[e("span",{class:"status-dot"},null,-1),k("已分配 ",-1)])])):(a(),o("span",{key:2,class:"status-badge status-available",onClick:n=>L(s.id),style:{cursor:"pointer"},title:"点击切换为不可用"},[...t[45]||(t[45]=[e("span",{class:"status-dot"},null,-1),k("可用 ",-1)])],8,ee))]),e("div",{class:"account-email copyable",onClick:n=>O(s.email),title:"点击复制"},[t[46]||(t[46]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})],-1)),k(" "+i(s.email),1)],8,se),e("div",le,[e("div",ae,[t[47]||(t[47]=e("span",{class:"detail-label"},"密码",-1)),e("span",{class:"detail-value copyable",onClick:n=>O(s.password),title:"点击复制"},i(st(s.password)),9,oe)]),s.recovery_email?(a(),o("div",ne,[t[48]||(t[48]=e("span",{class:"detail-label"},"辅助邮箱",-1)),e("span",{class:"detail-value copyable",onClick:n=>O(s.recovery_email),title:"点击复制"},i(s.recovery_email),9,ie)])):v("",!0),s.totp_secret?(a(),o("div",re,[t[49]||(t[49]=e("span",{class:"detail-label"},"2FA",-1)),e("span",de,i(s.totp_secret.substring(0,16))+i(s.totp_secret.length>16?"...":""),1)])):v("",!0),e("div",ue,[t[50]||(t[50]=e("span",{class:"detail-label"},"添加时间",-1)),e("span",pe,i(K(s.created_at)),1)])]),e("div",ce,[e("button",{class:"btn-action btn-edit",onClick:n=>Y(s)},[...t[51]||(t[51]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),k(" 编辑 ",-1)])],8,me),s.assigned_order_id?(a(),o("button",{key:0,class:"btn-action btn-release",onClick:n=>X(s.id),title:"关联订单: "+s.assigned_order_id},[...t[52]||(t[52]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),k(" 释放 ",-1)])],8,ve)):v("",!0),s.assigned_order_id?v("",!0):(a(),o("button",{key:1,class:"btn-action btn-delete",onClick:n=>W(s.id)},[...t[53]||(t[53]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),k(" 删除 ",-1)])],8,ye))])]))),128))]),r.value?(a(),o("div",{key:0,class:"modal-overlay",onClick:t[16]||(t[16]=pt(s=>r.value=null,["self"]))},[e("div",be,[e("h3",fe,"编辑账号 #"+i(r.value.id),1),e("div",ge,[t[54]||(t[54]=e("label",{class:"form-label"},"谷歌邮箱",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[11]||(t[11]=s=>r.value.email=s),placeholder:"example@gmail.com"},null,512),[[u,r.value.email]])]),e("div",we,[t[55]||(t[55]=e("label",{class:"form-label"},"密码",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[12]||(t[12]=s=>r.value.password=s),placeholder:"谷歌密码"},null,512),[[u,r.value.password]])]),e("div",ke,[t[56]||(t[56]=e("label",{class:"form-label"},"辅助邮箱",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[13]||(t[13]=s=>r.value.recovery_email=s),placeholder:"recovery@example.com"},null,512),[[u,r.value.recovery_email]])]),e("div",xe,[t[57]||(t[57]=e("label",{class:"form-label"},"2FA密钥/应用密码",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[14]||(t[14]=s=>r.value.totp_secret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[u,r.value.totp_secret]])]),e("div",_e,[e("button",{class:"btn",style:{flex:"1",background:"var(--bg-input)"},onClick:t[15]||(t[15]=s=>r.value=null)}," 取消 "),e("button",{class:"btn btn-primary",style:{flex:"1"},onClick:tt,disabled:!r.value.email||!r.value.password}," 保存 ",8,Ce)])])])):v("",!0),z.value.length===0?(a(),o("div",he," 暂无账号，请先添加 ")):v("",!0)])):v("",!0),m.value==="config"?(a(),o("div",Pe,[t[63]||(t[63]=e("h2",{class:"card-title"},"系统配置",-1)),e("div",$e,[t[59]||(t[59]=e("label",{class:"form-label"},"支付宝收款码图片URL",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[17]||(t[17]=s=>g.value.alipay_qrcode=s),placeholder:"https://example.com/qrcode.png"},null,512),[[u,g.value.alipay_qrcode]])]),e("div",Ue,[t[60]||(t[60]=e("label",{class:"form-label"},"内置账号价格 (元)",-1)),d(e("input",{type:"number",class:"input","onUpdate:modelValue":t[18]||(t[18]=s=>g.value.price_builtin=s)},null,512),[[u,g.value.price_builtin]])]),e("div",Ve,[t[61]||(t[61]=e("label",{class:"form-label"},"自有账号价格 (元)",-1)),d(e("input",{type:"number",class:"input","onUpdate:modelValue":t[19]||(t[19]=s=>g.value.price_custom=s)},null,512),[[u,g.value.price_custom]])]),e("div",Ae,[t[62]||(t[62]=e("label",{class:"form-label"},"部署脚本下载地址",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[20]||(t[20]=s=>g.value.download_url=s),placeholder:"https://example.com/deploy-script.zip"},null,512),[[u,g.value.download_url]])]),e("button",{class:"btn btn-primary",onClick:et},"保存配置")])):v("",!0),m.value==="test"?(a(),o("div",Te,[t[71]||(t[71]=e("h2",{class:"card-title"},"生成测试密钥",-1)),t[72]||(t[72]=e("p",{style:{color:"var(--text-muted)","margin-bottom":"20px"}}," 无需支付，使用自定义测试账号直接生成可用密钥。测试账号信息不会存入账号池。 ",-1)),e("div",Se,[t[64]||(t[64]=e("label",{class:"form-label"},[k("测试账号邮箱 "),e("span",{style:{color:"var(--danger)"}},"*")],-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[21]||(t[21]=s=>b.value.email=s),placeholder:"test@gmail.com"},null,512),[[u,b.value.email]])]),e("div",Me,[t[65]||(t[65]=e("label",{class:"form-label"},[k("测试账号密码 "),e("span",{style:{color:"var(--danger)"}},"*")],-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[22]||(t[22]=s=>b.value.password=s),placeholder:"测试账号密码"},null,512),[[u,b.value.password]])]),e("div",Ee,[t[66]||(t[66]=e("label",{class:"form-label"},"辅助邮箱 (可选)",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[23]||(t[23]=s=>b.value.recoveryEmail=s),placeholder:"recovery@example.com"},null,512),[[u,b.value.recoveryEmail]])]),e("div",ze,[t[67]||(t[67]=e("label",{class:"form-label"},"2FA密钥/应用密码 (可选)",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[24]||(t[24]=s=>b.value.totpSecret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[u,b.value.totpSecret]])]),e("button",{class:"btn btn-success",onClick:ot,disabled:T.value||!b.value.email||!b.value.password},i(T.value?"生成中...":"生成测试密钥"),9,Ie),_.value?(a(),o("div",Oe,[t[70]||(t[70]=e("h3",{style:{color:"var(--success)","margin-bottom":"12px"}},"测试密钥生成成功",-1)),e("div",Be,[t[68]||(t[68]=e("span",{style:{color:"var(--text-muted)"}},"订单号：",-1)),e("span",De,i(_.value.orderId),1)]),e("div",Fe,[t[69]||(t[69]=e("span",{style:{color:"var(--text-muted)"}},"密钥：",-1)),e("span",Le,i(_.value.keyCode),1)]),e("button",{class:"btn btn-primary",onClick:nt},"复制密钥")])):v("",!0)])):v("",!0),m.value==="password"?(a(),o("div",Ke,[t[77]||(t[77]=e("h2",{class:"card-title"},"修改管理员账号密码",-1)),e("div",qe,[t[73]||(t[73]=e("label",{class:"form-label"},"新用户名 (可选，不填则保持不变)",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[25]||(t[25]=s=>p.value.newUsername=s),placeholder:"admin"},null,512),[[u,p.value.newUsername]])]),e("div",Ne,[t[74]||(t[74]=e("label",{class:"form-label"},"旧密码",-1)),d(e("input",{type:"password",class:"input","onUpdate:modelValue":t[26]||(t[26]=s=>p.value.oldPassword=s),placeholder:"请输入当前密码"},null,512),[[u,p.value.oldPassword]])]),e("div",Re,[t[75]||(t[75]=e("label",{class:"form-label"},"新密码",-1)),d(e("input",{type:"password",class:"input","onUpdate:modelValue":t[27]||(t[27]=s=>p.value.newPassword=s),placeholder:"请输入新密码"},null,512),[[u,p.value.newPassword]])]),e("div",He,[t[76]||(t[76]=e("label",{class:"form-label"},"确认新密码",-1)),d(e("input",{type:"password",class:"input","onUpdate:modelValue":t[28]||(t[28]=s=>p.value.confirmPassword=s),placeholder:"请再次输入新密码"},null,512),[[u,p.value.confirmPassword]])]),e("button",{class:"btn btn-primary",onClick:at},"修改密码")])):v("",!0)]))}},We=mt(je,[["__scopeId","data-v-dc707764"]]);export{We as default};
