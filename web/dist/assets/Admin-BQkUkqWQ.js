import{o as gt,a as ft,b as o,c as n,t as r,g,d as e,m as bt,n as T,F as q,l as G,h as d,v as u,p as Z,f as k,r as m,q as wt}from"./index-DZPuk-FT.js";import{a as c}from"./index-Dnk_-Q5K.js";import{_ as kt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const xt={class:"container"},_t={key:0,class:"toast"},Ct={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"20px"}},ht={style:{display:"flex",gap:"12px"}},Pt={class:"stats-grid"},$t={class:"stat-card"},Ut={class:"stat-value"},Vt={class:"stat-card"},At={class:"stat-value"},Tt={class:"stat-card"},Dt={class:"stat-value"},St={class:"stat-card"},It={class:"stat-value"},Et={class:"stat-card"},Mt={class:"stat-value"},Ot={class:"admin-nav"},zt={key:1,class:"card"},Bt={style:{"overflow-x":"auto"}},Lt={class:"table"},Ft={style:{"font-family":"monospace"}},Kt={key:0,class:"status-badge status-used"},qt={key:1,class:"status-badge status-paid"},Nt={key:0,class:"status-badge status-pending"},Rt={key:1,class:"status-badge status-expired"},Ht={style:{display:"flex",gap:"8px"}},jt=["onClick"],Gt=["onClick"],Zt={key:0,style:{"text-align":"center",padding:"40px",color:"var(--text-muted)"}},Jt={key:2,class:"card"},Qt={style:{"margin-bottom":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},Wt={style:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"}},Xt={class:"form-group",style:{"margin-bottom":"0"}},Yt={class:"form-group",style:{"margin-bottom":"0"}},te={class:"form-group",style:{"margin-bottom":"0"}},ee={class:"form-group",style:{"margin-bottom":"0"}},se={style:{"margin-bottom":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},le={class:"accounts-grid"},ae=["onDragstart","onDragover","onDrop"],oe={class:"account-header"},ne={class:"account-id"},re=["onClick"],ie={key:1,class:"status-badge status-assigned"},de=["onClick"],ue=["onClick"],pe={class:"account-details"},ce={class:"detail-row"},ve=["onClick"],me={key:0,class:"detail-row"},ye=["onClick"],ge={key:1,class:"detail-row"},fe={class:"detail-value",style:{"font-family":"monospace","font-size":"0.75rem"}},be={class:"detail-row"},we={class:"detail-value"},ke={class:"account-actions"},xe=["onClick"],_e=["onClick","title"],Ce=["onClick"],he={class:"modal"},Pe={class:"modal-title"},$e={class:"form-group"},Ue={class:"form-group"},Ve={class:"form-group"},Ae={class:"form-group"},Te={style:{display:"flex",gap:"12px","margin-top":"20px"}},De=["disabled"],Se={key:1,style:{"text-align":"center",padding:"40px",color:"var(--text-muted)"}},Ie={key:3,class:"card"},Ee={class:"form-group"},Me={class:"form-group"},Oe={class:"form-group"},ze={class:"form-group"},Be={key:4,class:"card"},Le={class:"form-group"},Fe={class:"form-group"},Ke={class:"form-group"},qe={class:"form-group"},Ne=["disabled"],Re={key:0,class:"test-key-result",style:{"margin-top":"20px",padding:"20px",background:"var(--bg-input)","border-radius":"12px"}},He={style:{"margin-bottom":"12px"}},je={style:{"font-family":"monospace"}},Ge={style:{"margin-bottom":"16px"}},Ze={style:{"font-family":"monospace","font-size":"1.2rem",color:"var(--primary)","font-weight":"600"}},Je={key:5,class:"card"},Qe={class:"form-group"},We={class:"form-group"},Xe={class:"form-group"},Ye={class:"form-group"},ts={__name:"Admin",setup(es){const z=wt(),y=m("orders"),E=m(""),U=m({totalOrders:0,paidOrders:0,usedKeys:0,availableAccounts:0,totalRevenue:0}),B=m([]),D=m([]),w=m({alipay_qrcode:"",price_builtin:"60",price_custom:"50",download_url:""}),i=m(null),b=m({email:"",password:"",recoveryEmail:"",totpSecret:""}),S=m(""),v=m({oldPassword:"",newPassword:"",confirmPassword:"",newUsername:""}),f=m({email:"",password:"",recoveryEmail:"",totpSecret:""}),M=m(!1),P=m(null),h=m(null),V=m(null),N=m(Date.now());let O=null;c.interceptors.request.use(l=>{const t=localStorage.getItem("adminToken");return t&&(l.headers.Authorization=`Bearer ${t}`),l}),gt(async()=>{await Promise.all([x(),L(),_(),Q()]),O=setInterval(()=>{N.value=Date.now()},1e3)}),ft(()=>{O&&(clearInterval(O),O=null)});function R(l){const s=new Date(l+"Z").getTime()+10*60*1e3,a=Math.floor((s-N.value)/1e3);return Math.max(0,a)}function J(l){const t=Math.floor(l/60),s=l%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}async function x(){try{const{data:l}=await c.get("/api/admin/stats");U.value=l}catch(l){console.error("加载统计失败",l)}}async function L(){try{const{data:l}=await c.get("/api/admin/orders");B.value=l}catch(l){console.error("加载订单失败",l)}}async function _(){try{const{data:l}=await c.get("/api/admin/accounts");D.value=l}catch(l){console.error("加载账号失败",l)}}async function Q(){try{const{data:l}=await c.get("/api/admin/config");w.value={...w.value,...l}}catch(l){console.error("加载配置失败",l)}}async function W(l){var t,s;if(confirm("确认该订单已收款？"))try{const{data:a}=await c.post("/api/admin/order/confirm",{orderId:l});alert(`订单已确认，密钥: ${a.keyCode}`),await Promise.all([x(),L()])}catch(a){alert(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.error)||"确认失败")}}async function X(l){var t,s;if(confirm("确认删除该订单？如果绑定了内置账号且未使用，账号将被释放。"))try{await c.delete(`/api/admin/orders/${l}`),await Promise.all([x(),L(),_()]),alert("订单已删除")}catch(a){alert(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.error)||"删除失败")}}async function Y(){var l,t;if(!b.value.email||!b.value.password){alert("请填写邮箱和密码");return}try{await c.post("/api/admin/accounts",b.value),b.value={email:"",password:"",recoveryEmail:"",totpSecret:""},await Promise.all([x(),_()]),alert("添加成功")}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"添加失败")}}async function tt(){var s,a,p,A;if(!S.value.trim()){alert("请输入账号信息");return}const l=S.value.trim().split(`
`),t=[];for(const C of l){const K=C.includes("---")?"---":"|",I=C.split(K);I.length>=2&&t.push({email:I[0].trim(),password:I[1].trim(),recoveryEmail:((s=I[2])==null?void 0:s.trim())||"",totpSecret:((a=I[3])==null?void 0:a.trim())||""})}if(t.length===0){alert("未识别到有效账号");return}try{const{data:C}=await c.post("/api/admin/accounts/batch",{accounts:t});S.value="",await Promise.all([x(),_()]),alert(`添加完成！成功: ${C.successCount}, 失败: ${C.failCount}`)}catch(C){alert(((A=(p=C.response)==null?void 0:p.data)==null?void 0:A.error)||"批量添加失败")}}async function et(l){if(confirm("确认删除该账号？"))try{await c.delete(`/api/admin/accounts/${l}`),await Promise.all([x(),_()])}catch{alert("删除失败")}}async function st(l){if(confirm("确认释放该账号？将重置为可用状态。"))try{await c.post(`/api/admin/accounts/${l}/release`),await Promise.all([x(),_()]),$("账号已释放")}catch{alert("释放失败")}}async function H(l){var t,s;try{const{data:a}=await c.post(`/api/admin/accounts/${l}/toggle-status`);await Promise.all([x(),_()]),$(a.message)}catch(a){alert(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.error)||"切换状态失败")}}function lt(l,t){h.value=t,l.dataTransfer.effectAllowed="move",l.dataTransfer.setData("text/plain",t)}function at(){h.value=null,V.value=null}function ot(l,t){h.value!==null&&h.value!==t&&(V.value=t)}function nt(){V.value=null}async function rt(l,t){l.preventDefault();const s=h.value;if(s===null||s===t){h.value=null,V.value=null;return}const a=[...D.value],[p]=a.splice(s,1);a.splice(t,0,p),D.value=a,h.value=null,V.value=null;try{const A=a.map((C,K)=>({id:C.id,sort_order:K}));await c.post("/api/admin/accounts/reorder",{orders:A}),$("排序已保存")}catch(A){console.error("保存排序失败:",A),await _(),$("保存排序失败")}}function it(l){i.value={...l}}async function dt(){var l,t;if(i.value)try{const s={email:i.value.email,password:i.value.password,recoveryEmail:i.value.recovery_email||"",totpSecret:i.value.totp_secret||""};await c.put(`/api/admin/accounts/${i.value.id}`,s),i.value=null,await _(),$("账号已更新")}catch(s){console.error("保存账号失败:",s),alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"保存失败: "+(s.message||"未知错误"))}}async function ut(){try{await c.post("/api/admin/config",w.value),alert("配置已保存")}catch{alert("保存失败")}}function j(l){return l?new Date(l).toLocaleString("zh-CN"):"-"}function pt(l){return l?l.length<=4?"****":l.substring(0,2)+"****"+l.substring(l.length-2):"-"}async function F(l){if(l)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(l);else{const t=document.createElement("textarea");t.value=l,t.style.position="fixed",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}$("已复制到剪贴板")}catch(t){console.error("复制失败:",t),$("复制失败，请手动复制")}}function $(l){E.value=l,setTimeout(()=>{E.value=""},1500)}function ct(){localStorage.removeItem("adminToken"),z.push("/admin/login")}async function vt(){var l,t;if(!v.value.oldPassword||!v.value.newPassword){alert("请填写旧密码和新密码");return}if(v.value.newPassword!==v.value.confirmPassword){alert("两次输入的新密码不一致");return}if(v.value.newPassword.length<6){alert("新密码长度至少6位");return}try{await c.post("/api/admin/password",{oldPassword:v.value.oldPassword,newPassword:v.value.newPassword,newUsername:v.value.newUsername||void 0}),alert("密码修改成功，请重新登录"),localStorage.removeItem("adminToken"),z.push("/admin/login")}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"修改失败")}}async function mt(){var l,t;if(!f.value.email||!f.value.password){alert("请填写测试账号邮箱和密码");return}M.value=!0,P.value=null;try{const{data:s}=await c.post("/api/admin/test-key",f.value);P.value={keyCode:s.keyCode,orderId:s.orderId},await x()}catch(s){alert(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.error)||"生成测试密钥失败")}finally{M.value=!1}}function yt(){P.value&&(navigator.clipboard.writeText(P.value.keyCode),alert("密钥已复制到剪贴板"))}return(l,t)=>(o(),n("div",xt,[E.value?(o(),n("div",_t,r(E.value),1)):g("",!0),e("div",Ct,[t[29]||(t[29]=e("h1",null,"管理后台",-1)),e("div",ht,[e("button",{class:"btn",style:{background:"var(--bg-input)"},onClick:t[0]||(t[0]=s=>bt(z).push("/"))},"返回首页"),e("button",{class:"btn btn-danger",onClick:ct},"退出登录")])]),e("div",Pt,[e("div",$t,[e("div",Ut,r(U.value.totalOrders),1),t[30]||(t[30]=e("div",{class:"stat-label"},"总订单数",-1))]),e("div",Vt,[e("div",At,r(U.value.paidOrders),1),t[31]||(t[31]=e("div",{class:"stat-label"},"已支付订单",-1))]),e("div",Tt,[e("div",Dt,r(U.value.usedKeys),1),t[32]||(t[32]=e("div",{class:"stat-label"},"已使用密钥",-1))]),e("div",St,[e("div",It,r(U.value.availableAccounts),1),t[33]||(t[33]=e("div",{class:"stat-label"},"可用账号",-1))]),e("div",Et,[e("div",Mt,"¥"+r(U.value.totalRevenue),1),t[34]||(t[34]=e("div",{class:"stat-label"},"总收入",-1))])]),e("div",Ot,[e("button",{class:T({active:y.value==="orders"}),onClick:t[1]||(t[1]=s=>y.value="orders")}," 订单管理 ",2),e("button",{class:T({active:y.value==="accounts"}),onClick:t[2]||(t[2]=s=>y.value="accounts")}," 账号池管理 ",2),e("button",{class:T({active:y.value==="config"}),onClick:t[3]||(t[3]=s=>y.value="config")}," 系统配置 ",2),e("button",{class:T({active:y.value==="test"}),onClick:t[4]||(t[4]=s=>y.value="test")}," 测试密钥 ",2),e("button",{class:T({active:y.value==="password"}),onClick:t[5]||(t[5]=s=>y.value="password")}," 修改密码 ",2)]),y.value==="orders"?(o(),n("div",zt,[t[36]||(t[36]=e("h2",{class:"card-title"},"订单列表",-1)),e("div",Bt,[e("table",Lt,[t[35]||(t[35]=e("thead",null,[e("tr",null,[e("th",null,"订单号"),e("th",null,"类型"),e("th",null,"金额"),e("th",null,"邮箱"),e("th",null,"密钥"),e("th",null,"状态"),e("th",null,"创建时间"),e("th",null,"操作")])],-1)),e("tbody",null,[(o(!0),n(q,null,G(B.value,s=>(o(),n("tr",{key:s.order_id},[e("td",null,r(s.order_id),1),e("td",null,r(s.key_type==="builtin"?"内置账号":"自有账号"),1),e("td",null,"¥"+r(s.amount),1),e("td",null,r(s.contact_email||"-"),1),e("td",Ft,r(s.key_code||"-"),1),e("td",null,[s.is_used?(o(),n("span",Kt,"已使用")):s.status==="paid"?(o(),n("span",qt,"已支付")):(o(),n(q,{key:2},[R(s.created_at)>0?(o(),n("span",Nt," 待支付 "+r(J(R(s.created_at))),1)):(o(),n("span",Rt,"已过期"))],64))]),e("td",null,r(j(s.created_at)),1),e("td",null,[e("div",Ht,[s.status==="pending"?(o(),n("button",{key:0,class:"btn btn-success",style:{padding:"6px 12px","font-size":"0.85rem"},onClick:a=>W(s.order_id)}," 确认支付 ",8,jt)):g("",!0),e("button",{class:"btn btn-danger",style:{padding:"6px 12px","font-size":"0.85rem"},onClick:a=>X(s.order_id)}," 删除 ",8,Gt)])])]))),128))])])]),B.value.length===0?(o(),n("div",Zt," 暂无订单 ")):g("",!0)])):g("",!0),y.value==="accounts"?(o(),n("div",Jt,[t[59]||(t[59]=e("h2",{class:"card-title"},"内置账号池 (Gemini CLI / 反重力认证)",-1)),e("div",Qt,[t[41]||(t[41]=e("h3",{style:{"margin-bottom":"12px","font-size":"1rem"}},"添加新账号",-1)),e("div",Wt,[e("div",Xt,[t[37]||(t[37]=e("label",{class:"form-label"},"谷歌邮箱",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[6]||(t[6]=s=>b.value.email=s),placeholder:"example@gmail.com"},null,512),[[u,b.value.email]])]),e("div",Yt,[t[38]||(t[38]=e("label",{class:"form-label"},"密码",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[7]||(t[7]=s=>b.value.password=s),placeholder:"谷歌密码"},null,512),[[u,b.value.password]])]),e("div",te,[t[39]||(t[39]=e("label",{class:"form-label"},"辅助邮箱",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[8]||(t[8]=s=>b.value.recoveryEmail=s),placeholder:"recovery@example.com"},null,512),[[u,b.value.recoveryEmail]])]),e("div",ee,[t[40]||(t[40]=e("label",{class:"form-label"},"2FA密钥/应用密码",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[9]||(t[9]=s=>b.value.totpSecret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[u,b.value.totpSecret]])])]),e("button",{class:"btn btn-primary",style:{"margin-top":"12px"},onClick:Y},"添加账号")]),e("div",se,[t[42]||(t[42]=e("h3",{style:{"margin-bottom":"12px","font-size":"1rem"}},"批量添加 (格式: 邮箱|密码|辅助邮箱|2FA密钥，每行一个)",-1)),d(e("textarea",{class:"textarea","onUpdate:modelValue":t[10]||(t[10]=s=>S.value=s),placeholder:`example1@gmail.com|password1|recovery1@example.com|totp_secret1
example2@gmail.com|password2|recovery2@example.com|totp_secret2`,style:{"min-height":"120px"}},null,512),[[u,S.value]]),e("button",{class:"btn btn-primary",style:{"margin-top":"12px"},onClick:tt},"批量添加")]),e("div",le,[(o(!0),n(q,null,G(D.value,(s,a)=>(o(),n("div",{key:s.id,class:T(["account-card",{dragging:h.value===a,"drag-over":V.value===a}]),draggable:"true",onDragstart:p=>lt(p,a),onDragend:at,onDragover:Z(p=>ot(p,a),["prevent"]),onDragleave:nt,onDrop:p=>rt(p,a)},[e("div",oe,[e("div",ne,[t[43]||(t[43]=e("span",{class:"drag-handle",title:"拖动排序"},"⋮⋮",-1)),k(" #"+r(a+1),1)]),s.assigned_order_id==="DISABLED"?(o(),n("span",{key:0,class:"status-badge status-disabled",onClick:p=>H(s.id),style:{cursor:"pointer"},title:"点击切换为可用"},[...t[44]||(t[44]=[e("span",{class:"status-dot"},null,-1),k("已禁用 ",-1)])],8,re)):s.assigned_order_id?(o(),n("span",ie,[...t[45]||(t[45]=[e("span",{class:"status-dot"},null,-1),k("已分配 ",-1)])])):(o(),n("span",{key:2,class:"status-badge status-available",onClick:p=>H(s.id),style:{cursor:"pointer"},title:"点击切换为不可用"},[...t[46]||(t[46]=[e("span",{class:"status-dot"},null,-1),k("可用 ",-1)])],8,de))]),e("div",{class:"account-email copyable",onClick:p=>F(s.email),title:"点击复制"},[t[47]||(t[47]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})],-1)),k(" "+r(s.email),1)],8,ue),e("div",pe,[e("div",ce,[t[48]||(t[48]=e("span",{class:"detail-label"},"密码",-1)),e("span",{class:"detail-value copyable",onClick:p=>F(s.password),title:"点击复制"},r(pt(s.password)),9,ve)]),s.recovery_email?(o(),n("div",me,[t[49]||(t[49]=e("span",{class:"detail-label"},"辅助邮箱",-1)),e("span",{class:"detail-value copyable",onClick:p=>F(s.recovery_email),title:"点击复制"},r(s.recovery_email),9,ye)])):g("",!0),s.totp_secret?(o(),n("div",ge,[t[50]||(t[50]=e("span",{class:"detail-label"},"2FA",-1)),e("span",fe,r(s.totp_secret.substring(0,16))+r(s.totp_secret.length>16?"...":""),1)])):g("",!0),e("div",be,[t[51]||(t[51]=e("span",{class:"detail-label"},"添加时间",-1)),e("span",we,r(j(s.created_at)),1)])]),e("div",ke,[e("button",{class:"btn-action btn-edit",onClick:p=>it(s)},[...t[52]||(t[52]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),k(" 编辑 ",-1)])],8,xe),s.assigned_order_id?(o(),n("button",{key:0,class:"btn-action btn-release",onClick:p=>st(s.id),title:"关联订单: "+s.assigned_order_id},[...t[53]||(t[53]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),k(" 释放 ",-1)])],8,_e)):g("",!0),s.assigned_order_id?g("",!0):(o(),n("button",{key:1,class:"btn-action btn-delete",onClick:p=>et(s.id)},[...t[54]||(t[54]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),k(" 删除 ",-1)])],8,Ce))])],42,ae))),128))]),i.value?(o(),n("div",{key:0,class:"modal-overlay",onClick:t[16]||(t[16]=Z(s=>i.value=null,["self"]))},[e("div",he,[e("h3",Pe,"编辑账号 #"+r(i.value.id),1),e("div",$e,[t[55]||(t[55]=e("label",{class:"form-label"},"谷歌邮箱",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[11]||(t[11]=s=>i.value.email=s),placeholder:"example@gmail.com"},null,512),[[u,i.value.email]])]),e("div",Ue,[t[56]||(t[56]=e("label",{class:"form-label"},"密码",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[12]||(t[12]=s=>i.value.password=s),placeholder:"谷歌密码"},null,512),[[u,i.value.password]])]),e("div",Ve,[t[57]||(t[57]=e("label",{class:"form-label"},"辅助邮箱",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[13]||(t[13]=s=>i.value.recovery_email=s),placeholder:"recovery@example.com"},null,512),[[u,i.value.recovery_email]])]),e("div",Ae,[t[58]||(t[58]=e("label",{class:"form-label"},"2FA密钥/应用密码",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[14]||(t[14]=s=>i.value.totp_secret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[u,i.value.totp_secret]])]),e("div",Te,[e("button",{class:"btn",style:{flex:"1",background:"var(--bg-input)"},onClick:t[15]||(t[15]=s=>i.value=null)}," 取消 "),e("button",{class:"btn btn-primary",style:{flex:"1"},onClick:dt,disabled:!i.value.email||!i.value.password}," 保存 ",8,De)])])])):g("",!0),D.value.length===0?(o(),n("div",Se," 暂无账号，请先添加 ")):g("",!0)])):g("",!0),y.value==="config"?(o(),n("div",Ie,[t[64]||(t[64]=e("h2",{class:"card-title"},"系统配置",-1)),e("div",Ee,[t[60]||(t[60]=e("label",{class:"form-label"},"支付宝收款码图片URL",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[17]||(t[17]=s=>w.value.alipay_qrcode=s),placeholder:"https://example.com/qrcode.png"},null,512),[[u,w.value.alipay_qrcode]])]),e("div",Me,[t[61]||(t[61]=e("label",{class:"form-label"},"内置账号价格 (元)",-1)),d(e("input",{type:"number",class:"input","onUpdate:modelValue":t[18]||(t[18]=s=>w.value.price_builtin=s)},null,512),[[u,w.value.price_builtin]])]),e("div",Oe,[t[62]||(t[62]=e("label",{class:"form-label"},"自有账号价格 (元)",-1)),d(e("input",{type:"number",class:"input","onUpdate:modelValue":t[19]||(t[19]=s=>w.value.price_custom=s)},null,512),[[u,w.value.price_custom]])]),e("div",ze,[t[63]||(t[63]=e("label",{class:"form-label"},"部署脚本下载地址",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[20]||(t[20]=s=>w.value.download_url=s),placeholder:"https://example.com/deploy-script.zip"},null,512),[[u,w.value.download_url]])]),e("button",{class:"btn btn-primary",onClick:ut},"保存配置")])):g("",!0),y.value==="test"?(o(),n("div",Be,[t[72]||(t[72]=e("h2",{class:"card-title"},"生成测试密钥",-1)),t[73]||(t[73]=e("p",{style:{color:"var(--text-muted)","margin-bottom":"20px"}}," 无需支付，使用自定义测试账号直接生成可用密钥。测试账号信息不会存入账号池。 ",-1)),e("div",Le,[t[65]||(t[65]=e("label",{class:"form-label"},[k("测试账号邮箱 "),e("span",{style:{color:"var(--danger)"}},"*")],-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[21]||(t[21]=s=>f.value.email=s),placeholder:"test@gmail.com"},null,512),[[u,f.value.email]])]),e("div",Fe,[t[66]||(t[66]=e("label",{class:"form-label"},[k("测试账号密码 "),e("span",{style:{color:"var(--danger)"}},"*")],-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[22]||(t[22]=s=>f.value.password=s),placeholder:"测试账号密码"},null,512),[[u,f.value.password]])]),e("div",Ke,[t[67]||(t[67]=e("label",{class:"form-label"},"辅助邮箱 (可选)",-1)),d(e("input",{type:"email",class:"input","onUpdate:modelValue":t[23]||(t[23]=s=>f.value.recoveryEmail=s),placeholder:"recovery@example.com"},null,512),[[u,f.value.recoveryEmail]])]),e("div",qe,[t[68]||(t[68]=e("label",{class:"form-label"},"2FA密钥/应用密码 (可选)",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[24]||(t[24]=s=>f.value.totpSecret=s),placeholder:"TOTP密钥或应用专用密码"},null,512),[[u,f.value.totpSecret]])]),e("button",{class:"btn btn-success",onClick:mt,disabled:M.value||!f.value.email||!f.value.password},r(M.value?"生成中...":"生成测试密钥"),9,Ne),P.value?(o(),n("div",Re,[t[71]||(t[71]=e("h3",{style:{color:"var(--success)","margin-bottom":"12px"}},"测试密钥生成成功",-1)),e("div",He,[t[69]||(t[69]=e("span",{style:{color:"var(--text-muted)"}},"订单号：",-1)),e("span",je,r(P.value.orderId),1)]),e("div",Ge,[t[70]||(t[70]=e("span",{style:{color:"var(--text-muted)"}},"密钥：",-1)),e("span",Ze,r(P.value.keyCode),1)]),e("button",{class:"btn btn-primary",onClick:yt},"复制密钥")])):g("",!0)])):g("",!0),y.value==="password"?(o(),n("div",Je,[t[78]||(t[78]=e("h2",{class:"card-title"},"修改管理员账号密码",-1)),e("div",Qe,[t[74]||(t[74]=e("label",{class:"form-label"},"新用户名 (可选，不填则保持不变)",-1)),d(e("input",{type:"text",class:"input","onUpdate:modelValue":t[25]||(t[25]=s=>v.value.newUsername=s),placeholder:"admin"},null,512),[[u,v.value.newUsername]])]),e("div",We,[t[75]||(t[75]=e("label",{class:"form-label"},"旧密码",-1)),d(e("input",{type:"password",class:"input","onUpdate:modelValue":t[26]||(t[26]=s=>v.value.oldPassword=s),placeholder:"请输入当前密码"},null,512),[[u,v.value.oldPassword]])]),e("div",Xe,[t[76]||(t[76]=e("label",{class:"form-label"},"新密码",-1)),d(e("input",{type:"password",class:"input","onUpdate:modelValue":t[27]||(t[27]=s=>v.value.newPassword=s),placeholder:"请输入新密码"},null,512),[[u,v.value.newPassword]])]),e("div",Ye,[t[77]||(t[77]=e("label",{class:"form-label"},"确认新密码",-1)),d(e("input",{type:"password",class:"input","onUpdate:modelValue":t[28]||(t[28]=s=>v.value.confirmPassword=s),placeholder:"请再次输入新密码"},null,512),[[u,v.value.confirmPassword]])]),e("button",{class:"btn btn-primary",onClick:vt},"修改密码")])):g("",!0)]))}},os=kt(ts,[["__scopeId","data-v-5237d314"]]);export{os as default};
