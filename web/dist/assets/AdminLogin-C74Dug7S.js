import{b as d,c as p,d as a,h as c,v as m,k as b,t as v,g,r,q as y}from"./index-CGKu9DAf.js";import{a as _}from"./index-Dnk_-Q5K.js";const k={class:"container",style:{"max-width":"400px","margin-top":"100px"}},x={class:"card"},w={class:"form-group"},h={class:"form-group"},V={key:0,class:"alert alert-danger"},B=["disabled"],N={__name:"AdminLogin",setup(C){const f=y(),l=r(""),o=r(""),n=r(!1),t=r("");async function u(){var i,e;if(!l.value||!o.value){t.value="请输入用户名和密码";return}n.value=!0,t.value="";try{const{data:s}=await _.post("/api/admin/login",{username:l.value,password:o.value});localStorage.setItem("adminToken",s.token),f.push("/admin")}catch(s){t.value=((e=(i=s.response)==null?void 0:i.data)==null?void 0:e.error)||"登录失败"}finally{n.value=!1}}return(i,e)=>(d(),p("div",k,[a("div",x,[e[4]||(e[4]=a("h2",{class:"card-title"},"管理员登录",-1)),a("div",w,[e[2]||(e[2]=a("label",{class:"form-label"},"用户名",-1)),c(a("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s),placeholder:"请输入用户名"},null,512),[[m,l.value]])]),a("div",h,[e[3]||(e[3]=a("label",{class:"form-label"},"密码",-1)),c(a("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),placeholder:"请输入密码",onKeyup:b(u,["enter"])},null,544),[[m,o.value]])]),t.value?(d(),p("div",V,v(t.value),1)):g("",!0),a("button",{class:"btn btn-primary btn-block",onClick:u,disabled:n.value},v(n.value?"登录中...":"登录"),9,B)])]))}};export{N as default};
